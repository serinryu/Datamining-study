# 6장. 빅데이터 분석 기반의 구축

## 애드 혹 분석

애드 혹 데이터 분석할 때 : 데이터 처리를 조금씩 대화식으로 실행할 수 있는 소프트웨어를 선호. 

- 예를 들면 , 주피터와 Spark 를 조합하여 대화식 데이터 처리를 할 수 있음. 이러한 노트북이나 스크립트 언어를 사용한 데이터 처리는 자주 데이터 분석을 하는 사람들에게 효과적

## Hadoop 에 의한 데이터 파이프라인

장기적인 운용을 전제로 하는 배치 처리할 때(일일 배치처리 = 매일매일 정기적으로 데이터가 집계되는 경우) : 대화식 실행보다도 유지&보수의 장점을 염두에 두고, 벌크형 전송 도구(정기적으로 실행) 및 SQL 에 의한 쿼리를 사용하여 가시성이 좋은 데이터 파이프라인을 기술한다.

- 예를 들면, Hadoop 을 중심으로한 데이터 파이프라인으로, Embulk, Hive, Presto 를 사용한 3단계의 파이프라인을 사용한다. → 데이터 소스는 MongoDB 이용. MongoDB 로부터 데이터를 추출하기 위해 오픈소스의 벌크 전송 도구인 Embulk 를 사용할 수 있다. (그렇지 않아도 MongoDB 전용 커맨드라인을 사용하거나, Hive 로부터 MongoDB 에 직접 접속해도 상관은 없음) 또한, 장기적인 데이터 분석을 위해 Hive 로 열 지향 스토리지 만들고 그것을 Presto 로 집계.

물론, 실제로는 3단계 이상의 더 다단계로 연결하므로써 얼마든지 다양하고 복잡한 데이터 처리 가능하다.

## 워크플로 관리 도구에 의한 자동화

데이터 파이프라인을 자동화하려면, 오류 발생 시의 복구를 염두에 두고 워크플로를 설계한다. (워크플로 관리 도구 사용) 

- 스크립트 형의 워크플로 관리도구로 ‘Airflow’를 사용하면 시간을 파라미터로 부여함으로써 멱등한 태스크를 쉽게 구현 가능.

## 클라우드 서비스에 의한 데이터 파이프라인

빅데이터를 위한 분산 시스템은 자신이 직접 구축, 유지, 보수하는 것이 아니라 클라우드 서비스를 사용하는 경우가 많아지고 있다. 즉, 최근에는 클라우드 서비스 보급으로, 실제 데이터 처리를 클라우드 상에서 실행하는 경우가 많아지고 있다. 

클라우드 서비스에 따라 제공되는 내용은 다르지만, 기본적으로 모두 여기서 언급한 요소 기술을 조합하므로써 만들어진 시스템이라 볼 수 있다. 그러나, 아무것도 모르고 그냥 사용하는 것보다 각 기술의 역할을 이해하고 그것을 올바르게 사용해야 한다. 

클라우스 서비스 예시

- 아마존 웹 서비스(AWS) : 빅데이터 분야에서 예전부터 사용되고 있는 클라우드 서비스. AWS 는 기능마다 서비스가 나눠져 있어 이용자는 거기서 자신에게 필요한 것만 선택해 그것들을 서로 연결함으로써 시스템을 구축한다. 즉, 기능마다 서비스가 나눠져 있어 조합의 자유도가 높지만, 전체를 제대로 연결하는 데에는 어느 정도의 지식과 기술이 필요하다. → 전체 구성을 직접 설계하고 싶어 하는 엔지니어에게는 좋은 방법.
- 구글 클라우드 플랫폼(GCP) : 구글의 소프트웨어와 기본시설을 활용하여 대규모 데이터 처리를 실행할 수 있는 강점. 그 중에서도 데이터 웨어하우스를 위한 클라우드 서비스로 Google BigQuery 가 유명(AWS 에서는 Amazon Redshift). AWS와 마찬가지로 GCP 에도 데이터 파이스파인을 구성하는 다수의 서비스가 제공.
- Treasure Data
